<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>httpd_util</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="css/main.css" type="text/css" media="screen" />
    <script src="js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <table width="100%" border='0' cellpadding='0' cellspacing='0' class='banner'>
        <tr>
            <td class="file-title"><span class="file-title-prefix">Module</span><br />httpd_util</td>
            <td align="right">

            </td>
        </tr>
    </table>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
    <p>This module provides the Erlang Web Server API module
      programmer with miscellaneous utility functions.</p>
  </div>
    

    
    
    <div class="sectiontitle">Contents</div>
    <ul>
        
        <li><a href="#">SEE ALSO</a></li>
        
    </ul>
    

    
    
    <div class="sectiontitle">Functions</div>
    <ul>
        
        <li><a href="#convert_request_dateDateStringgtErlDatebad_date">convert_request_date(DateString) -&gt; ErlDate|bad_date</a></li>
        
        <li><a href="#create_etagFileInfogtEtag">create_etag(FileInfo) -&gt; Etag</a></li>
        
        <li><a href="#dayNthDayOfWeekgtDayOfWeek">day(NthDayOfWeek) -&gt; DayOfWeek</a></li>
        
        <li><a href="#decode_hexHexValuegtDecValue">decode_hex(HexValue) -&gt; DecValue</a></li>
        
        <li><a href="#flatlengthNestedListgtSize">flatlength(NestedList) -&gt; Size</a></li>
        
        <li><a href="#headerStatusCodePersistentConn">header(StatusCode,PersistentConn)</a></li>
        
        <li><a href="#hexlist_to_integerHexStringgtNumber">hexlist_to_integer(HexString) -&gt; Number</a></li>
        
        <li><a href="#integer_to_hexlistNumbergtHexString">integer_to_hexlist(Number) -&gt; HexString</a></li>
        
        <li><a href="#lookupETSTableKeygtResult">lookup(ETSTable,Key) -&gt; Result</a></li>
        
        <li><a href="#lookup_mimeConfigDBSuffix">lookup_mime(ConfigDB,Suffix)</a></li>
        
        <li><a href="#lookup_mime_defaultConfigDBSuffix">lookup_mime_default(ConfigDB,Suffix)</a></li>
        
        <li><a href="#messageStatusCodePhraseArgsConfigDBgtMessage">message(StatusCode,PhraseArgs,ConfigDB) -&gt; Message</a></li>
        
        <li><a href="#monthNthMonthgtMonth">month(NthMonth) -&gt; Month</a></li>
        
        <li><a href="#multi_lookupETSTableKeygtResult">multi_lookup(ETSTable,Key) -&gt; Result</a></li>
        
        <li><a href="#reason_phraseStatusCodegtDescription">reason_phrase(StatusCode) -&gt; Description</a></li>
        
        <li><a href="#rfc1123_dategtRFC1123Date">rfc1123_date() -&gt; RFC1123Date</a></li>
        
        <li><a href="#splitStringRegExpNgtSplitRes">split(String,RegExp,N) -&gt; SplitRes</a></li>
        
        <li><a href="#split_pathRequestLinegtPathQueryStringOrPathInfo">split_path(RequestLine) -&gt; {Path,QueryStringOrPathInfo}</a></li>
        
        <li><a href="#split_script_pathRequestLinegtSplitted">split_script_path(RequestLine) -&gt; Splitted</a></li>
        
        <li><a href="#stripStringgtStripped">strip(String) -&gt; Stripped</a></li>
        
        <li><a href="#suffixFileNamegtSuffix">suffix(FileName) -&gt; Suffix</a></li>
        
    </ul>
    

     
    <div class="sectiontitle">SEE ALSO</div>
    
    <div class="description">
        
    <marker id="see_also"/>
    <title>SEE ALSO</title>
    <p>
  <seealso marker="httpd">httpd(3)</seealso>
</p>
  
    </div>
    
    
	<div class="sectiontitle">Exports</div>
		
            <div class="method">
                <div class="title">
                    <a name="convert_request_dateDateStringgtErlDatebad_date"></a><b>convert_request_date(DateString) -&gt; ErlDate|bad_date</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>DateString = string()</b><br/>
        <b>ErlDate = {{Year,Month,Date},{Hour,Min,Sec}}</b><br/>
        <b>Year = Month = Date = Hour = Min = Sec = integer()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="convert_request_date"/>
        <p><tt>convert_request_date/1</tt> converts <tt>DateString</tt> to the Erlang
          date format. DateString must be in one of the three date formats that is defined
          in the RFC 2616.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="create_etagFileInfogtEtag"></a><b>create_etag(FileInfo) -&gt; Etag</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>FileInfo = file_info()</b><br/>
        <b>Etag = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="create_etag"/>
        <p><tt>create_etag/1</tt> calculates the Etag for a file, from it's size and time for
          last modification. fileinfo is a record defined in <tt>kernel/include/file.hrl</tt></p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="decode_hexHexValuegtDecValue"></a><b>decode_hex(HexValue) -&gt; DecValue</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>HexValue = DecValue = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="decode_hex"/>
        <p>Converts the hexadecimal value <tt>HexValue</tt> into it's
          decimal equivalent (<tt>DecValue</tt>).</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="dayNthDayOfWeekgtDayOfWeek"></a><b>day(NthDayOfWeek) -&gt; DayOfWeek</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>NthDayOfWeek = 1-7</b><br/>
        <b>DayOfWeek = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="day"/>
        <p><tt>day/1</tt> converts the day of the week
          (<tt>NthDayOfWeek</tt>) as an integer (1-7) to an abbreviated
          string, that is: </p>
        <p>1 = "Mon", 2 = "Tue", ..., 7 = "Sat".</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="flatlengthNestedListgtSize"></a><b>flatlength(NestedList) -&gt; Size</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>NestedList = list()</b><br/>
        <b>Size = integer()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="flatlength"/>
        <p><tt>flatlength/1</tt> computes the size of the possibly nested
          list <tt>NestedList</tt>. Which may contain binaries.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="headerStatusCodePersistentConn"></a><b>header(StatusCode,PersistentConn)<br/>header(StatusCode,Date)<br/>header(StatusCode,MimeType,Date)<br/>header(StatusCode,MimeType,PersistentConn,Date) -&gt; HTTPHeader</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>StatusCode = integer()</b><br/>
        <b>Date = rfc1123_date()</b><br/>
        <b>MimeType = string()</b><br/>
        <b>PersistentConn = true | false</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="header"/>
        <p><tt>header</tt> returns a HTTP 1.1 header string. The
          <tt>StatusCode</tt> is one of the status codes defined in RFC
          2616 and the <tt>Date</tt> string is RFC 1123 
          compliant. (See <seealso marker="#rfc1123_date">rfc1123_date/0</seealso>).
          </p>
        <p>Note that the two version of <tt>header/n</tt> that does not
          has a <tt>PersistentConn</tt> argument is there only for
          backward compability, and must not be used in new Erlang
          Webserver API modules.  that will support persistent
          connections.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="hexlist_to_integerHexStringgtNumber"></a><b>hexlist_to_integer(HexString) -&gt; Number</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>Number = integer()</b><br/>
        <b>HexString = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="hexlist_to_integer"/>
        <p><tt>hexlist_to_integer</tt> Convert the Hexadecimal value of HexString to an integer.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="integer_to_hexlistNumbergtHexString"></a><b>integer_to_hexlist(Number) -&gt; HexString</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>Number = integer()</b><br/>
        <b>HexString = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="integer_to_hexlist"/>
        <p><tt>integer_to_hexlist/1</tt> Returns a string that represents the Number in a Hexadecimal form.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="lookupETSTableKeygtResult"></a><b>lookup(ETSTable,Key) -&gt; Result<br/>lookup(ETSTable,Key,Undefined) -&gt; Result</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>ETSTable = ets_table()</b><br/>
        <b>Key = term()</b><br/>
        <b>Result = term() | undefined | Undefined</b><br/>
        <b>Undefined = term()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="lookup"/>
        <p><tt>lookup</tt> extracts <tt>{Key,Value}</tt> tuples from
          <tt>ETSTable</tt> and returns the <tt>Value</tt> associated  
          with <tt>Key</tt>. If <tt>ETSTable</tt> is of type <tt>bag</tt>
          only the first <tt>Value</tt> associated with <tt>Key</tt> is
          returned. <tt>lookup/2</tt> returns <tt>undefined</tt> and
          <tt>lookup/3</tt> returns <tt>Undefined</tt> if no <tt>Value</tt>
          is found.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="lookup_mimeConfigDBSuffix"></a><b>lookup_mime(ConfigDB,Suffix)<br/>lookup_mime(ConfigDB,Suffix,Undefined) -&gt; MimeType</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>ConfigDB = ets_table()</b><br/>
        <b>Suffix = string()</b><br/>
        <b>MimeType = string() | undefined | Undefined</b><br/>
        <b>Undefined = term()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="lookup_mime"/>
        <p><tt>lookup_mime</tt> returns the mime type associated with a
          specific file suffix as specified in the <tt>mime.types</tt>
          file (located in the <path unix="$SERVER_ROOT/conf/mime.types" windows="%SERVER_ROOT%\\\\conf\\\\mime.types">config directory</path>).</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="lookup_mime_defaultConfigDBSuffix"></a><b>lookup_mime_default(ConfigDB,Suffix)<br/>lookup_mime_default(ConfigDB,Suffix,Undefined) -&gt; MimeType</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>ConfigDB = ets_table()</b><br/>
        <b>Suffix = string()</b><br/>
        <b>MimeType = string() | undefined | Undefined</b><br/>
        <b>Undefined = term()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="lookup_mime_default"/>
        <p><tt>lookup_mime_default</tt> returns the mime type associated
          with a specific file suffix as specified in the
          <tt>mime.types</tt> file (located in the
          <path unix="$SERVER_ROOT/conf/mime.types" windows="%SERVER_ROOT%\\\\conf\\\\mime.types">config  directory</path>). If no appropriate association can be found 
          the value of DefaultType is
          returned.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="messageStatusCodePhraseArgsConfigDBgtMessage"></a><b>message(StatusCode,PhraseArgs,ConfigDB) -&gt; Message</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>StatusCode = 301 | 400 | 403 | 404 | 500 | 501 | 504</b><br/>
        <b>PhraseArgs = term()</b><br/>
        <b>ConfigDB = ets_table</b><br/>
        <b>Message = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="message"/>
        <p><tt>message/3</tt> returns an informative HTTP 1.1 status
          string in HTML. Each <tt>StatusCode</tt> requires a specific
          <tt>PhraseArgs</tt>:
          </p>
        <taglist>
          <tag><tt>301</tt></tag>
          <item><tt>string()</tt>: A URL pointing at the new document
           position.</item>
          <tag><tt>400 | 401 | 500</tt></tag>
          <item><tt>none</tt> (No <tt>PhraseArgs</tt>)</item>
          <tag><tt>403 | 404</tt></tag>
          <item><tt>string()</tt>: A <tt>Request-URI</tt> as described in
           RFC 2616.</item>
          <tag><tt>501</tt></tag>
          <item><tt>{Method,RequestURI,HTTPVersion}</tt>: The HTTP
          <tt>Method</tt>, <tt>Request-URI</tt> and <tt>HTTP-Version</tt>
           as defined in RFC 2616.</item>
          <tag><tt>504</tt></tag>
          <item><tt>string()</tt>: A string describing why the service
           was unavailable.</item>
        </taglist>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="monthNthMonthgtMonth"></a><b>month(NthMonth) -&gt; Month</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>NthMonth = 1-12</b><br/>
        <b>Month = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="month"/>
        <p><tt>month/1</tt> converts the month <tt>NthMonth</tt> as an
          integer (1-12) to an abbreviated string, that is: </p>
        <p>1 = "Jan", 2 = "Feb", ..., 12 = "Dec".</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="multi_lookupETSTableKeygtResult"></a><b>multi_lookup(ETSTable,Key) -&gt; Result</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>ETSTable = ets_table()</b><br/>
        <b>Key = term()</b><br/>
        <b>Result = [term()]</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="multi_lookup"/>
        <p><tt>multi_lookup</tt> extracts all <tt>{Key,Value}</tt> tuples
          from an <tt>ETSTable</tt> and returns <em>all</em><tt>Values</tt> associated with the <tt>Key</tt> in a list.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="reason_phraseStatusCodegtDescription"></a><b>reason_phrase(StatusCode) -&gt; Description</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>StatusCode = 100|  200 | 201 | 202 | 204 | 205 | 206 |  300 | 301 | 302 | 303 | 304 |  400 | 401 | 402 | 403 | 404 | 405 | 406 | 410 411 | 412 | 413 | 414 415 | 416 | 417 |  500 | 501 | 502 | 503 | 504 | 505</b><br/>
        <b>Description = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="reason phrase"/>
        <p><tt>reason_phrase</tt> returns the <tt>Description</tt> of an
          HTTP 1.1 <tt>StatusCode</tt>, for example 200 is "OK" and 201
          is "Created". Read RFC 2616 for further information.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="rfc1123_dategtRFC1123Date"></a><b>rfc1123_date() -&gt; RFC1123Date<br/>rfc1123_date({{YYYY,MM,DD},{Hour,Min,Sec}}}) -&gt; RFC1123Date</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>YYYY = MM = DD = Hour = Min =Sec = integer()</b><br/>
        <b>RFC1123Date = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="rfc1123_date"/>
        <p><tt>rfc1123_date/0</tt> returns the current date in RFC 1123
          format. <tt>rfc_date/1</tt> converts the date in the Erlang format
          to the RFC 1123 date format.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="splitStringRegExpNgtSplitRes"></a><b>split(String,RegExp,N) -&gt; SplitRes</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>String = RegExp = string()</b><br/>
        <b>SplitRes = {ok, FieldList} | {error, errordesc()}</b><br/>
        <b>Fieldlist = [string()]</b><br/>
        <b>N = integer</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="split"/>
        <p><tt>split/3</tt> splits the <tt>String</tt> in <tt>N</tt> chunks
          using the <tt>RegExp</tt>. <tt>split/3</tt> is is equivalent to
          <tt>regexp:split/2</tt> with one exception, that is <tt>N</tt>
          defines the number of maximum number of fields in the
          <tt>FieldList</tt>.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="split_script_pathRequestLinegtSplitted"></a><b>split_script_path(RequestLine) -&gt; Splitted</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>RequestLine = string()</b><br/>
        <b>Splitted = not_a_script | {Path, PathInfo, QueryString}</b><br/>
        <b>Path = QueryString = PathInfo = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="split_script_path"/>
        <p><tt>split_script_path/1</tt> is equivalent to
          <tt>split_path/1</tt> with one exception. If the longest
          possible path is not a regular, accessible and executable
          file <tt>not_a_script</tt> is returned.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="split_pathRequestLinegtPathQueryStringOrPathInfo"></a><b>split_path(RequestLine) -&gt; {Path,QueryStringOrPathInfo}</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>RequestLine = Path = QueryStringOrPathInfo = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="split_path"/>
        <p><tt>split_path/1</tt> splits the <tt>RequestLine</tt> in a file
          reference (<tt>Path</tt>) and a <tt>QueryString</tt> or a
          <tt>PathInfo</tt> string as specified in RFC 2616. A
          <tt>QueryString</tt> is isolated from the <tt>Path</tt> with a
          question mark (<tt>?</tt>) and <tt>PathInfo</tt> with a slash
          (/). In the case of a <tt>QueryString</tt>, everything before
          the <tt>?</tt> is a <tt>Path</tt> and everything after a
          <tt>QueryString</tt>. In the case of a <tt>PathInfo</tt> the
          <tt>RequestLine</tt> is scanned from left-to-right on the hunt
          for longest possible <tt>Path</tt> being a file or a
          directory. Everything after the longest possible
          <tt>Path</tt>, isolated with a <tt>/</tt>, is regarded as
          <tt>PathInfo</tt>. The resulting <tt>Path</tt> is decoded using
          <tt>decode_hex/1</tt> before delivery.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="stripStringgtStripped"></a><b>strip(String) -&gt; Stripped</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>String = Stripped = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="strip"/>
        <p><tt>strip/1</tt> removes any leading or trailing linear white
          space from the string.  Linear white space should be read as
          horisontal tab or space.</p>
      
                </div>
                

            </div>
      
            <div class="method">
                <div class="title">
                    <a name="suffixFileNamegtSuffix"></a><b>suffix(FileName) -&gt; Suffix</b>
                </div>

								
                <div class="func_types">
									Types:
									<p>
                  
        <b>FileName = Suffix = string()</b><br/>
      
									</p>
                </div>
                
                
                <div class="description">
                  
        <marker id="suffix"/>
        <p><tt>suffix/1</tt> is equivalent to
          <tt>filename:extension/1</tt> with one exception, that is
          <tt>Suffix</tt> is returned without a leading dot (<tt>.</tt>). </p>
      
                </div>
                

            </div>
      

			<center>
			<hr/>
			<small>Copyright &copy; 1991-2009
			  <a href="http://www.ericsson.com/technology/opensource/erlang">Ericsson AB</a><br/>
			</small>
			</center>
    
</div>
    </div>
  </body>
</html>    